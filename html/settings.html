<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>ezytdl</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alata&amp;display=swap">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="assets/css/rotating.compiled.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
</head>

<body style="background: rgb(10,10,10);width: 100vw;height: 100vh;font-family: Alata, sans-serif;">
    <div class="d-flex justify-content-between align-items-center" style="width: 100vw;height: 80px;padding: 24px;background: rgba(0,0,0,0.5);">
        <div class="container-fluid d-flex justify-content-start align-items-end" style="padding: 0px;">
            <h1 style="color: rgb(255,255,255);">ezytdl</h1>
            <h6 id="version" style="color: rgb(71,71,71);margin-bottom: 13px;">v0.0.0</h6>
        </div>
        <div class="container-fluid d-flex justify-content-end align-items-center" style="padding: 0px;"><a class="btn btn-primary" role="button" style="background: rgb(255,255,255);border-style: none;border-radius: 100px;margin: 0px 6px;color: rgb(0,0,0);" href="index.html"><i class="fas fa-cog" style="margin-right: 6px;"></i>Settings</a></div>
    </div>
    <div class="d-flex flex-column justify-content-start align-items-center" id="settingsList" style="height: calc(100% - 80px);width: 100vw;">
        <div class="d-flex justify-content-between align-items-center" style="width: calc(100% - 40px);min-height: 50px;background: #282828;border-radius: 10px;padding: 0px 12px;margin-top: 12px;">
            <h6 id="formatName" style="color: rgb(255,255,255);margin-top: 5px;width: 250px;">Save Location</h6><input class="d-flex justify-content-center align-items-center" type="text" id="saveLocationInput" style="background: rgb(35,35,35);border-width: 0px;border-radius: 100px;padding: 6px 16px;border-bottom-right-radius: 0px;border-top-right-radius: 0px;color: rgb(255,255,255);height: 36px;border-top-left-radius: 100px;width: 100%;"><button class="btn btn-primary" id="saveLocationSave" type="button" style="height: 36px;border-width: 0px;border-bottom-right-radius: 100px;border-top-right-radius: 100px;border-top-left-radius: 0px;border-bottom-left-radius: 0px;background: rgb(255,255,255);color: rgb(0,0,0);padding-right: 15px;"><i class="fas fa-save"></i></button>
        </div>
        <div class="d-flex justify-content-between align-items-center" style="width: calc(100% - 40px);min-height: 50px;background: #282828;border-radius: 10px;padding: 0px 12px;margin-top: 12px;">
            <h6 id="ytDlpDownloadTxt" style="color: rgb(255,255,255);margin-top: 5px;width: 424px;" target="_blank">Download latest version of YT-DLP</h6><a class="btn btn-primary d-flex justify-content-center align-items-center" role="button" id="ytdlpUpdate" style="height: 36px;border-width: 0px;border-bottom-right-radius: 100px;border-top-right-radius: 100px;border-top-left-radius: 100px;border-bottom-left-radius: 100px;background: rgb(255,255,255);color: rgb(0,0,0);width: 36px;" href="updating.html"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="1em" height="1em" fill="currentColor">
                    <!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. -->
                    <path d="M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z"></path>
                </svg></a>
        </div>
    </div><script>
    const configRequest = new XMLHttpRequest();

    const toggleButtons = (enable) => {
        if(!enable) {
            document.querySelectorAll(`button`).forEach((button) => {
                button.disabled = true;
            })
        } else {
            document.querySelectorAll(`button`).forEach((button) => {
                button.disabled = false;
            })
        }
    }

    const parse = (config) => {
        toggleButtons(true)
        
        document.getElementById(`saveLocationInput`).value = config.saveLocation;
        document.getElementById(`saveLocationSave`).onclick = () => updateConfig({ saveLocation: document.getElementById(`saveLocationInput`).value })
    }

    const updateConfig = (json) => {
        let req = new XMLHttpRequest();
        toggleButtons(false)
        req.open("POST", "http://localhost:3000/config", true);
        req.setRequestHeader("Content-Type", "application/json");
        req.onload = () => {
            const config = JSON.parse(req.responseText);
            parse(config);
        }
        req.send(JSON.stringify(json));
    }

    configRequest.open("POST", "http://localhost:3000/config", true);

    configRequest.onload = () => {
        const config = JSON.parse(configRequest.responseText);

        parse(config);
    }

    configRequest.send();
</script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/addFormatTags.js"></script>
    <script src="assets/js/version.js"></script>
</body>

</html>